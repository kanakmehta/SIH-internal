<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kisaan Saathi - Login</title>
<link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@400;600&family=Krona+One&display=swap" rel="stylesheet">
<style>
/* Your existing CSS */
* { box-sizing: border-box; margin:0; padding:0; }
body {
    font-family: 'Josefin Sans', sans-serif;
    min-height:100vh; display:flex; justify-content:center; align-items:center;
    background:url('https://scitechdaily.com/images/Crops-Growing-Fertile-Farm-Land.jpg') no-repeat center center/cover;
    position:relative; overflow:hidden;
}
.overlay { position:absolute; top:0; left:0; width:100%; height:100%; background-color: rgba(0,0,0,0.5); z-index:1; }
.login-container { position:relative; z-index:2; background: linear-gradient(145deg,#ffffff,#e8ffe0); width:420px; padding:60px 40px; border-radius:30px; box-shadow:0 25px 50px rgba(0,0,0,0.3); text-align:center; }
.logo { font-family:'Krona One', sans-serif; font-size:48px; color:#174821; margin-bottom:20px; position:relative; }
.logo::before { content:'üåæ'; font-size:48px; position:absolute; left:-60px; top:-10px; animation:bounce 2s infinite; }
@keyframes bounce { 0%,100% { transform:translateY(0); } 50% { transform:translateY(-10px); } }
.subtitle { font-size:18px; color:#2e6219; margin-bottom:40px; }
input { width:100%; padding:14px 16px; margin:12px 0; border-radius:12px; border:1px solid #174821; font-size:16px; }
input:focus { outline:none; border-color:#2e6219; box-shadow:0 0 10px rgba(23,72,33,0.3); }
button { width:100%; padding:14px 0; margin-top:20px; border-radius:12px; border:none; background:linear-gradient(90deg,#174821,#2e6219); color:#DBFFBD; font-size:18px; font-weight:700; cursor:pointer; box-shadow:0 8px 20px rgba(0,0,0,0.2); }
button:hover { transform:translateY(-3px); background: linear-gradient(90deg,#2e6219,#174821); box-shadow:0 12px 25px rgba(0,0,0,0.3); }
.signup-link { margin-top:25px; display:block; color:#174821; text-decoration:none; font-weight:600; }
.signup-link:hover { color:#2e6219; }
.message { margin-bottom: 15px; font-weight:600; }
.message.success { color: green; }
.message.error { color: red; }
</style>
</head>
<body>
<div class="overlay"></div>
<div class="login-container">
    <div class="logo">Kisaan Saathi</div>
    <div class="subtitle">Welcome back! Login to continue üå±</div>

    <div id="message" class="message"></div>

    <form id="loginForm">
        <input type="text" id="username" placeholder="Username" required>
        <input type="password" id="password" placeholder="Password" required>
        <button type="submit">Login</button>
    </form>

    <a href="signup.html" class="signup-link">Don't have an account? Sign Up</a>
</div>

<script>
document.getElementById('loginForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    const messageDiv = document.getElementById('message');
    messageDiv.textContent = '';
    messageDiv.className = 'message';

    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;

    try {
        const res = await fetch('http://localhost:8000/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ username, password })
        });
        const data = await res.json();

       // if (res.ok) {
           // messageDiv.textContent = data.message;
           // messageDiv.classList.add('success');
            //setTimeout(() => { window.location.href = 'dashboard.html'; }, 1000);
        //}
           if (res.ok) {
              localStorage.setItem("loggedIn", "true");
              window.location.href = "dashboard.html";
            }

         else {
            messageDiv.textContent = data.detail || 'Login failed';
            messageDiv.classList.add('error');
        }
    } catch (err) {
        messageDiv.textContent = 'Server error. Try again later.';
        messageDiv.classList.add('error');
    }
});
</script>
</body>
</html> 
<!-- <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kisaan Saathi - Login</title>
<link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@400;600&family=Krona+One&display=swap" rel="stylesheet">
<style>
/* Your existing CSS */
* { box-sizing: border-box; margin:0; padding:0; }
body {
    font-family: 'Josefin Sans', sans-serif;
    min-height:100vh; display:flex; justify-content:center; align-items:center;
    background:url('https://scitechdaily.com/images/Crops-Growing-Fertile-Farm-Land.jpg') no-repeat center center/cover;
    position:relative; overflow:hidden;
}
.overlay { position:absolute; top:0; left:0; width:100%; height:100%; background-color: rgba(0,0,0,0.5); z-index:1; }
.login-container { position:relative; z-index:2; background: linear-gradient(145deg,#ffffff,#e8ffe0); width:420px; padding:60px 40px; border-radius:30px; box-shadow:0 25px 50px rgba(0,0,0,0.3); text-align:center; }
.logo { font-family:'Krona One', sans-serif; font-size:48px; color:#174821; margin-bottom:20px; position:relative; }
.logo::before { content:'üåæ'; font-size:48px; position:absolute; left:-60px; top:-10px; animation:bounce 2s infinite; }
@keyframes bounce { 0%,100% { transform:translateY(0); } 50% { transform:translateY(-10px); } }
.subtitle { font-size:18px; color:#2e6219; margin-bottom:40px; }
input { width:100%; padding:14px 16px; margin:12px 0; border-radius:12px; border:1px solid #174821; font-size:16px; }
input:focus { outline:none; border-color:#2e6219; box-shadow:0 0 10px rgba(23,72,33,0.3); }
button { width:100%; padding:14px 0; margin-top:20px; border-radius:12px; border:none; background:linear-gradient(90deg,#174821,#2e6219); color:#DBFFBD; font-size:18px; font-weight:700; cursor:pointer; box-shadow:0 8px 20px rgba(0,0,0,0.2); }
button:hover { transform:translateY(-3px); background: linear-gradient(90deg,#2e6219,#174821); box-shadow:0 12px 25px rgba(0,0,0,0.3); }
.signup-link { margin-top:25px; display:block; color:#174821; text-decoration:none; font-weight:600; }
.signup-link:hover { color:#2e6219; }
.message { margin-bottom: 15px; font-weight:600; }
.message.success { color: green; }
.message.error { color: red; }
</style>
</head>
<body>
<div class="overlay"></div>
<div class="login-container">
    <div class="logo">Kisaan Saathi</div>
    <div class="subtitle">Welcome back! Login to continue üå±</div>

    <div id="message" class="message"></div>

    <form id="loginForm">
        <input type="text" name="username" id="username" placeholder="Email" required>
        <input type="password" name="password" id="password" placeholder="Password" required>
        <button type="submit">Login</button>
    </form>

    <a href="signup.html" class="signup-link">Don't have an account? Sign Up</a>
</div>

<!-- <script>
document.querySelector("form").addEventListener("submit", async (e) => {
  e.preventDefault();

  const email = document.querySelector("input[name='username']").value;
  const password = document.querySelector("input[name='password']").value;

  try {
    const res = await fetch("http://127.0.0.1:8000/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email, password })
    });

    if (res.ok) {
      alert("‚úÖ Login Successful");
      localStorage.setItem("loggedIn", "true");
      window.location.href = "dashboard.html";
    } else {
      const err = await res.json();
      alert("‚ùå " + err.detail);
    }
  } catch (error) {
    alert("‚ö†Ô∏è Server error. Try again later.");
    console.error(error);
  }
}); -->
<!--<script>
document.querySelector("form").addEventListener("submit", async (e) => {
  e.preventDefault();

  const username = document.querySelector("input[name='username']").value;
  const password = document.querySelector("input[name='password']").value;

  try {
    const res = await fetch("http://127.0.0.1:8000/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ username, password })   // ‚úÖ matches DB
    });

    if (res.ok) {
      alert("‚úÖ Login Successful");
      localStorage.setItem("loggedIn", "true");
      window.location.href = "dashboard.html";
    } else {
      const err = await res.json();
      alert("‚ùå " + (err.detail || "Invalid credentials"));
    }
  } catch (error) {
    alert("‚ö†Ô∏è Server error. Try again later.");
    console.error(error);
  }
});
</script>

<!-- </script> -->
</body>
</html> -->
